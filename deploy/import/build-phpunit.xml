<?xml version="1.0" encoding="UTF-8"?>
<project name="Phpunit" default="test-phpunit" basedir="/var/www/html">
    <property file="/deploy/build.properties"/>
    <property name="bin.phpunit" value="phpunit"/>
    <target name="validate-phpunit-properties" description="Ensure phpunit properties">
        <if>
            <not>
                <isset property="phpunit.filename"/>
            </not>
            <then>
                <fail>phpunit.filename is not specified</fail>
            </then>
        </if>
        <echo message="Done"/>
    </target>
    <target name="validate-phpunit-version" description="Ensure phpunit version">
        <exec command="${bin.phpunit} --version" passthru="true" checkreturn="true"/>
    </target>
    <target name="test-phpunit"
            depends="validate-phpunit-properties, validate-phpunit-version"
            description="Test phpunit">
        <exec command="${bin.phpunit} -c ${phpunit.filename}" passthru="true" checkreturn="true"/>
    </target>
</project>
